(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{684:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"commands"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[s._v("#")]),s._v(" commands")]),s._v(" "),n("ul",[n("li",[n("code",[s._v(".dockerignore")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v(".git\nnode_modules\nnpm-debug.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("Dockerfile")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("FROM, RUN, COPY, ADD, CMD, ENTRYPOINT, ENV, ARG,\nVOLUME, EXPOSE, WORKDIR, "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(", HEALTHCHECK,\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CMD")]),s._v("\nshell 格式：CMD "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("命令"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" 格式：CMD "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"可执行文件"')]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"参数1"')]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"参数2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("编写Dockerfile文件")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# FROM node:8.4：该 image 文件继承官方的 node image，")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 冒号表示标签，这里标签是8.4，即8.4版本的 node")]),s._v("\nFROM node:8.4\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# COPY . /app：将当前目录下的所有文件（除了.dockerignore排除的路径），")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 都拷贝进入 image 文件的/app目录")]),s._v("\nCOPY "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /app\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# WORKDIR /app：指定接下来的工作路径为/app")]),s._v("\nWORKDIR /app\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RUN npm install：在/app目录下，运行npm install命令安装依赖。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意，安装后所有的依赖，都将打包进入 image 文件")]),s._v("\nRUN "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --registry"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npm.taobao.org\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# EXPOSE 3000：将容器 3000 端口暴露出来， 允许外部连接这个端口")]),s._v("\nEXPOSE "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表示容器启动后自动执行node demos/01.js")]),s._v("\nCMD "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" demos/01.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("RUN命令与CMD命令")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("- RUN命令在 image 文件的构建阶段执行，执行结果都会打包进入 image 文件\n\n- CMD命令则是在容器启动后执行\n\n- 一个 Dockerfile 可以包含多个RUN命令,但是只能有一个CMD命令\n\n- 指定了CMD命令以后，docker run命令就不能附加命令了\n（比如前面的/bin/bash），否则它会覆盖CMD命令\n\n- "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --rm -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v(":3000 -it koa-demo:0.0.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("docker image")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出本机的所有 image 文件。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 image 文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("imageName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -f 表示Dockerfile所在路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image build -f ./Dockerfile\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 image 文件 : docker image build")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -t参数用来指定 image 文件的名字，后面还可以用冒号指定标签，")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 点表示 Dockerfile 文件所在的路径")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image build -t koa-demo "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image build -t koa-demo:0.0.1 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布 image 文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为本地的 image 标注用户名和版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image tag "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("imageName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("username"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("repository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image tag koa-demos:0.0.1 test/koa-demos:0.0.1\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也可以不标注用户名，重新构建一下 image 文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image build -t "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("username"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("repository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布 image 文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image push "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("username"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("repository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("Docker Compose工具:管理多个容器的联动")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://yeasy.gitbooks.io/docker_practice/compose/commands.html")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" --version "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动所有服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" stop "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭所有服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器文件删除（容器必须已经停止运行）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建docker-compose.yml")]),s._v("\nmysql:\n    image: mysql:5.7\n    environment:\n     - "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n     - "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_DATABASE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wordpress\nweb:\n    image: wordpress\n    links:\n     - mysql\n    environment:\n     - "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WORDPRESS_DB_PASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n    ports:\n     - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.3:8080:80"')]),s._v("\n    working_dir: /var/www/html\n    volumes:\n     - wordpress:/var/www/html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("在容器的命令行，按下 Ctrl + c 停止 Node 进程，然后按下 Ctrl + d （或者输入 exit）退出容器")])])]),s._v(" "),n("h2",{attrs:{id:"基本命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[s._v("#")]),s._v(" 基本命令")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("docker start")]),s._v("与"),n("code",[s._v("docker restart")])]),s._v(" "),n("li",[n("code",[s._v("docker logs")])]),s._v(" "),n("li",[n("code",[s._v("docker stop")])]),s._v(" "),n("li",[n("code",[s._v("docker exec")])]),s._v(" "),n("li",[n("code",[s._v("docker ps [-a]")])]),s._v(" "),n("li",[n("code",[s._v("docker attach")]),s._v(" 与 "),n("code",[s._v("docker exec")]),s._v(" 进入容器")]),s._v(" "),n("li",[n("code",[s._v("docker [-f] rm")]),s._v(" 删除容器")]),s._v(" "),n("li",[n("code",[s._v("docker inspect")])]),s._v(" "),n("li",[n("code",[s._v("docker history")]),s._v(" 具体查看镜像内的历史记录")]),s._v(" "),n("li",[n("code",[s._v("docker save")]),s._v(" 和 "),n("code",[s._v("docker load")])]),s._v(" "),n("li",[n("code",[s._v("docker pull [选项] [Docker Registry url]<仓库名>:<标签>")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull ubuntu:14.04\n\nDocker Registry url："),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("域名/IP"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":端口号"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("。默认 Docker Hub\n仓库名： "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("软件名"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("。默认为 library，也就是官方镜像\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("docker run [选项]")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -it --rm ubuntu:14.04 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数说明")]),s._v("\n-it：这是两个参数，一个是 -i：交互式操作，一个是 -t 终端\n--rm：这个参数是说容器退出后随之将其删除\nubuntu:14.04：这是指用 ubuntu:14.04 镜像为基础来启动容器。\nbash：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n--name：给容器起了一个名字\n-d: 容器运行在后台\n-p: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 表示端口映射，将宿主机的8080端口转发到容器内的80端口\n-v：表示需要将本地哪个目录挂载到容器中\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("docker images")]),s._v(" 列出镜像")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dangling")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示虚悬镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -q -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dangling")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除虚悬镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -a  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示中间层镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images ubuntu "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出部分镜像")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images ubuntu:16.04\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("since")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mongo:3.2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("before")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mongo:3.2\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("label")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.example.version"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -q\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images --format "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{.ID}}: {{.Repository}}"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images --format "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"table {{.ID}}'),n("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v("{{.Repository}}"),n("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[s._v("\\t")]),s._v('{{.Tag}}"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("docker commit [选项] <容器ID或容器名> [<仓库名>[:<标签>]]")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这条命令会用 nginx 镜像启动一个容器，命名为 webserver，并且映射了 80 端口，")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这样我们可以用浏览器去访问这个 nginx 服务器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name webserver -d -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 nginx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改内容")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it webserver "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<h1>Hello, Docker!</h1>'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/share/nginx/html/index.html\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示容器文件系统的前后变化")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v(" webserver\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --author "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Author <Author@gmail.com>"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --message "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改了默认网页"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    webserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    nginx:v2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("docker rmi [选项] <镜像1> [<镜像2> ...]")]),s._v(" 删除本地镜像")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -q -f "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dangling")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -q redis"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[n("code",[s._v("docker volume")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个数据卷")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create my-vol\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有的 数据卷")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除数据卷")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" my-vol\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果需要在删除容器的同时移除数据卷")]),s._v("\n可以在删除容器的时候使用 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -v 这个命令\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 无主的数据卷可能会占据很多空间，要清理请使用以下命令")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume prune\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定 数据卷 的信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume inspect my-vol\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动一个挂载数据卷的容器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d -P "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --name web "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -v my-vol:/wepapp \\")]),s._v("\n    --mount "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("my-vol,target"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/webapp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    training/webapp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    python app.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h2",{attrs:{id:"参考示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考示例"}},[s._v("#")]),s._v(" 参考示例")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://www.gitbook.com/book/yeasy/docker_practice/details",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker —— 从入门到实践"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/judasn/Linux-Tutorial/",target:"_blank",rel:"noopener noreferrer"}},[s._v("judasn/Linux-Tutorial"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Desktop"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://docs.docker.com/engine/installation/linux/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Get Docker CE for CentOS"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"http://guide.daocloud.io/dcs/docker-9152673.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("daocloud/Docker 入门"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5a142d7b6fb9a0451170c2c7",target:"_blank",rel:"noopener noreferrer"}},[s._v("基于 Docker 打造前端持续集成开发环境"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/0abe441d5d3c",target:"_blank",rel:"noopener noreferrer"}},[s._v("Windows 下使用 docker 部署 gitlab CI 服务"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://blog.csdn.net/xizaihui/article/details/52960604",target:"_blank",rel:"noopener noreferrer"}},[s._v("Centos7 创建支持 ssh 服务器的 docker 容器"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://cr.console.aliyun.com/#/accelerator",target:"_blank",rel:"noopener noreferrer"}},[s._v("cr.console.aliyun"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"http://mirrors.aliyun.com/docker-toolbox/",target:"_blank",rel:"noopener noreferrer"}},[s._v("mirrors.aliyun"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://labs.play-with-docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Play with Docker"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);